<!DOCTYPE html>
<html>
<head>
<title>RayVid Admin</title>
<meta name="viewport" content="width=device-width">
<style>
body{background:#0f0f0f;color:#fff;font-family:Inter;padding:20px}
input,textarea{width:100%;padding:10px;margin:6px 0;
border-radius:6px;border:none}
button{background:#ff0000;color:#fff;
padding:10px;border:none;border-radius:6px}
.card{max-width:500px;margin:auto;background:#181818;padding:20px;border-radius:12px}
</style>
</head>

<body>

<div class="card">
<h2>Admin Upload</h2>
<input id="title" placeholder="Video Title">
<textarea id="desc" placeholder="Description"></textarea>
<input id="drive" placeholder="Google Drive File ID">
<button onclick="upload()">Publish</button>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
 apiKey:"AIzaSyAoZdkD0PZz25lIVrNy3hQE2fBrkHELs2Q",
 authDomain:"rayvid-c074a.firebaseapp.com",
 projectId:"rayvid-c074a"
});

const auth=firebase.auth();
const db=firebase.firestore();

/* Admin Gate */
auth.onAuthStateChanged(user=>{
 if(!user){location.href="rayvid.html";}
 db.collection("users").doc(user.uid).get().then(d=>{
  if(!d.exists||d.data().role!=="admin"){
    alert("Access denied");location.href="rayvid.html";
  }
 });
});

function upload(){
 db.collection("videos").add({
  title:title.value,
  description:desc.value,
  driveId:drive.value,
  views:0,
  likes:0,
  uploadedBy:"admin",
  createdAt:Date.now()
 });
 alert("Video Published");
 title.value=desc.value=drive.value="";
}
</script>

</body>
</html>